name: Features - Manual


on:
  workflow_dispatch:
    inputs:
      type_input:
        description: 'Enter the version (stable/beta/alpha)'
        required: true
 
 

jobs:
  download-and-extract:
    runs-on: ubuntu-latest
    env:
      MAIL_ID: ${{ secrets.MAIL_ID }}
      NAME: ${{ secrets.NAME }}

    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    

    - name: Install modules
      run: |
        pip install -r requirements.txt


    - name: Download & Extract
      run: | 
        vername_type=$(echo "${{ github.event.inputs.type_input }}" | tr '[:upper:]' '[:lower:]')
        python main.py $vername_type
              
        

    - name: Add extracted file to Git
      run: |
        vername=$(jq -r '.version_name' manifest.json)
        git config --global user.email "${{ env.MAIL_ID }}"
        git config --global user.name "${{ env.NAME }}"
        git pull
        git add .
        git commit -m "${vername}"
        git push